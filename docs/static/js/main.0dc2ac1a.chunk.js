(this["webpackJsonpcubes-editor"]=this["webpackJsonpcubes-editor"]||[]).push([[0],{14:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n,c,r,i,o,l=a(1),s=a.n(l),u=a(6),d=a.n(u),m=(a(14),a(8)),b=a(4),v=a.n(b),f=a(2),h=a(3),w=function(e,t){var a=t.type,n=t.payload;switch(a){case"setCamera":return Object(h.a)(Object(h.a)({},e),{},{camera:{initial:n.initial}});case"createCube":return Object(h.a)(Object(h.a)({},e),{},{cubes:Object(h.a)(Object(h.a)({},e.cubes),{},Object(f.a)({},n.id,{position:{x:n.x,y:n.y,z:n.z},color:n.color,scale:1}))});case"scaleCube":return Object(h.a)(Object(h.a)({},e),{},{cubes:Object(h.a)(Object(h.a)({},e.cubes),{},Object(f.a)({},n.id,Object(h.a)(Object(h.a)({},e.cubes[n.id]),{},{scale:n.scale})))});case"resetScale":return Object(h.a)(Object(h.a)({},e),{},{cubes:v.a.mapValues(e.cubes,(function(e){return Object(h.a)(Object(h.a)({},e),{},{scale:1})}))});case"changeColor":return Object(h.a)(Object(h.a)({},e),{},{cubes:Object(h.a)(Object(h.a)({},e.cubes),{},Object(f.a)({},n.id,Object(h.a)(Object(h.a)({},e.cubes[n.id]),{},{color:n.color})))});case"delete":return Object(h.a)(Object(h.a)({},e),{},{active:e.active===n.id?null:e.active,hovered:e.hovered===n.id?null:e.hovered,cubes:v.a.omit(e.cubes,[n.id])});case"setHover":return Object(h.a)(Object(h.a)({},e),{},{hover:n.id});case"setActive":return Object(h.a)(Object(h.a)({},e),{},{active:n.id});default:return e}},E=a(0),O=a(7),j={},p=new E.h,C=new E.l(0,0),y="",g={};var k=Object(l.memo)((function(e){var t=e.active,a=e.hover,u=e.cubes,d=e.camera.initial,m=e.setActive,b=e.setHover,f=e.setCamera,h=function e(){requestAnimationFrame(e),function(){p.setFromCamera(C,c);var e=p.intersectObjects(n.children);e.length?y!==e[0].object.name&&(y=e[0].object.name,b(y)):y&&(y="",b(null))}(),r.render(n,c)},w=function(){d&&f(!1)},k=Object(l.useCallback)((function(e){n=new E.i,c=new E.f(75,window.innerWidth/window.innerHeight,.1,1e3),(r=new E.n({canvas:e})).setSize(window.innerWidth,window.innerHeight),c.position.z=5,(i=new O.a(c,r.domElement)).addEventListener("change",w),o=new E.a,h()}),[]);return Object(l.useLayoutEffect)((function(){function e(){c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}function t(e){C.x=e.clientX/window.innerWidth*2-1,C.y=-e.clientY/window.innerHeight*2+1}function a(){y&&m(y)}return window.addEventListener("resize",e),window.addEventListener("mousemove",t),window.addEventListener("click",a),function(){window.removeEventListener("resize",e),window.removeEventListener("mousemove",t),window.removeEventListener("click",a)}}),[]),Object(l.useEffect)((function(){var e=g.active,c=g.hover,r=g.cubes,l=g.initial;if(r!==u){v.a.difference(v.a.keys(r),v.a.keys(u)).forEach((function(e){var t=j[e];t&&(n.remove(t),t.material.dispose())}));var s=v.a.omit(u,v.a.keys(r));v.a.forOwn(s,(function(e,t){var a=e.color,c=e.position,r=c.x,i=c.y,l=c.z,s=new E.e({color:a}),u=new E.d(o,s);u.position.set(r,i,l),u.name=t,j[t]=u,n.add(u)})),v.a.intersection(v.a.keys(r),v.a.keys(u)).forEach((function(e){if(r[e]!==u[e]){var a=j[e];a&&(r[e].color!==u[e].color&&e!==t&&a.material.color.set(u[e].color),r[e].scale!==u[e].scale&&a.scale.set(u[e].scale,u[e].scale,u[e].scale))}}))}if(e!==t){if(e){var m=j[e],b=u[e];m&&b&&m.material.color.set(b.color)}if(t){var f=j[t],h=u[t];f&&h&&f.material.color.set("#0000FF")}}if(c!==a){if(c&&c!==t){var w=j[c],O=u[c];w&&O&&w.material.color.set(O.color)}if(a&&a!==t){var p=j[a],C=u[a];p&&C&&p.material.color.set("#00FF00")}}!l&&d&&i.reset(),g.active=t,g.hover=a,g.cubes=u,g.initial=d}),[t,a,u,d]),s.a.createElement("canvas",{ref:k,width:"100%",height:"100%"})})),L=(a(17),function(e){var t=e.numberOfCubes,a=e.createCube,n=e.resetCamera,c=e.resetScale;return s.a.createElement("div",{className:"LeftPanel"},s.a.createElement("h2",null,"Cubes: ",t),s.a.createElement("button",{onClick:a},"CREATE"),s.a.createElement("button",{onClick:n},"RESET CAMERA"),s.a.createElement("button",{onClick:c},"RESET SCALE"))}),S=(a(18),function(e){var t=e.activeId,a=e.color,n=e.scale,c=e.changeColor,r=e.scaleCube,i=e.confirmDelete;return s.a.createElement("div",{className:"RightPanel"},s.a.createElement("h2",null,"ACTIVE: ",t||"-"),t&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"colorPicker"},"COLOR"),s.a.createElement("br",null),s.a.createElement("input",{id:"colorPicker",type:"color",value:a,onChange:function(e){var a=e.target,n=(a=void 0===a?{}:a).value;n&&c(t,n)}})),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"scaleSlider"},"SCALE"),s.a.createElement("br",null),s.a.createElement("input",{id:"scaleSlider",type:"range",min:"0.1",max:"5",step:"0.2",value:n,onChange:function(e){var a=e.target,n=(a=void 0===a?{}:a).value;n&&r(t,Number(n))}})),s.a.createElement("button",{onClick:function(){window.confirm("Delete Cube ".concat(t,"?"))&&i(t)}},"DELETE")))}),A=0;var F=function(){var e=Object(l.useReducer)(w,{active:null,hover:null,cubes:{},camera:{initial:!0}}),t=Object(m.a)(e,2),a=t[0],n=t[1],c=a.cubes,r=a.active,i=v.a.size(c),o=c[r];return s.a.createElement(s.a.Fragment,null,s.a.createElement(k,Object.assign({},a,{setActive:function(e){return n({type:"setActive",payload:{id:e}})},setHover:function(e){return n({type:"setHover",payload:{id:e}})},setCamera:function(e){return n({type:"setCamera",payload:{initial:e}})}})),s.a.createElement(L,{numberOfCubes:i,createCube:function(){var e="".concat(++A),t=12*(Math.random()-.5),a=12*(Math.random()-.5),c=12*(Math.random()-1),r=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}();n({type:"createCube",payload:{id:e,x:t,y:a,z:c,color:r}})},resetCamera:function(){return n({type:"setCamera",payload:{initial:!0}})},resetScale:function(){return n({type:"resetScale"})}}),s.a.createElement(S,{activeId:r,color:o&&o.color,scale:o&&o.scale,changeColor:function(e,t){return n({type:"changeColor",payload:{id:e,color:t}})},scaleCube:function(e,t){return n({type:"scaleCube",payload:{id:e,scale:t}})},confirmDelete:function(e){return n({type:"delete",payload:{id:e}})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.0dc2ac1a.chunk.js.map